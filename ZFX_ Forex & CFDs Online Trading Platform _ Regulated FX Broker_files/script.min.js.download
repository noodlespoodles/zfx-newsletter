jQuery(function(){setTimeout(function(){jQuery("[data-img-style]").each(function(e,t){jQuery(t).attr("style",jQuery(t).attr("data-img-style"))}),jQuery(".js-wrapp-country-phone").find(".js-country-phone-composite__phone-country-code-select .country_select").each(function(){if(!jQuery(this).val()){var e=jQuery(this).find("option").first().attr("data-country_code");jQuery(this).val(e).change()}})},500),jQuery(".zfx-field-phone").on("input",function(e){this.value=this.value.replace(/[^\d]/g,"")}),jQuery(".js-zfx-form").on("submit",function(e){e.preventDefault();let t=$(".country-option[aria-selected='true']"),o=t.text(),r=o.match(/\d+/);if(r){let s=r[0];$('input[name="form_fields[phone_code]"]').val(s)}else console.log("No phone code found");var i=jQuery(this);return jQuery.ajax({url:i.attr("action"),method:"post",dataType:"json",data:jQuery(this).serialize(),beforeSend:function(){i.find(".zfx-form-load").show(),i.find(".zfx-field-type-error").text(""),i.find(".zfx-field-type-error-form").text("")},error:function(e){console.log(e)},success:function(e){if(i.closest(".zfx-form").find(".zfx-form-load").hide(),e.has_errors)jQuery.each(e.errors,function(e,t){i.closest(".zfx-form").find('[name="form_fields['+e+']"]').closest(".zfx-field-type-text").find(".zfx-field-type-error").text(t.error)}),void 0!==e.errors_form&&i.closest(".zfx-form").find(".zfx-field-type-error-form").text(e.errors_form.error),i.closest(".zfx-form").attr("action",i.closest(".zfx-form").attr("action").split("widget_form=send")[0]+"widget_form=send&revision="+Date.now());else{var t="",o="",r="",s="";void 0!==e.post&&void 0!==e.post.form_fields&&(void 0!==e.post.form_fields.first_name&&(t=e.post.form_fields.first_name),void 0!==e.post.form_fields.last_name&&(o=e.post.form_fields.last_name),void 0!==e.post.form_fields.email&&(r=e.post.form_fields.email),void 0!==e.post.form_fields.phone&&(s=e.post.form_fields.phone),void 0!==e.req&&null!=e.req&&void 0!==e.req.leadId&&(window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"GtmLeadGeneration",LeadID:e.req.leadId,LeadName:t,LeadSurname:o,LeadEmail:r,LeadPhoneNumber:s}))),void 0!==e.success.text?(i.closest(".zfx-form_wrapp").find(".zfx-form_success").show(),i.closest(".zfx-form_wrapp").find(".zfx-form_value").hide()):void 0!==e.success.redirect&&window.location.replace(e.success.redirect)}}}),!1});let e=$(".country-option[aria-selected='true']").attr("id"),t=$(".country-option[aria-selected='true'] svg use").attr("xlink:href");$('input[name="form_fields[countryId]"]').val(e),$(".flag-container svg use").attr("xlink:href",t),get_code_from_current_country()});function get_code_from_current_country(){let e=$(".ss-main .ss-values .ss-single").text(),t=e.match(/\+\d+/);$(".ss-main .ss-values .ss-single").text(t)}
